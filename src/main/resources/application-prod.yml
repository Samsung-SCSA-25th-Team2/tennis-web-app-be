# AWS 운영 환경 설정

# --- Database (운영 DB 및 Connection Pool 설정) ---
spring:
  datasource:
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
  jpa:
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect

# --- application-common.yml의 환경 변수 값 설정 ---

# JPA & SQL
DDL_AUTO: validate # 운영에서는 스키마 변경을 자동으로 하지 않고 검증만 하도록 설정
SHOW_SQL: false
SQL_INIT_MODE: never

# Kakao OAuth2 (운영용 키와 리다이렉트 URI는 외부 환경변수로 주입)
KAKAO_CLIENT_ID: ${KAKAO_CLIENT_ID}
KAKAO_CLIENT_SECRET: ${KAKAO_CLIENT_SECRET}
OAUTH2_REDIRECT_URI: ${PROD_OAUTH2_REDIRECT_URI} # 예: "https://api.your-domain.com/login/oauth2/code/kakao"

# JWT (Secret Key는 외부 환경변수로 주입)
JWT_SECRET: ${PROD_JWT_SECRET}

# Redis (운영 Redis 정보는 외부 환경변수로 주입)
REDIS_HOST: ${PROD_REDIS_HOST}
REDIS_PORT: ${PROD_REDIS_PORT}
REDIS_PASSWORD: ${PROD_REDIS_PASSWORD}

# Logging (운영에서는 INFO 레벨, 파일 로깅)
LOG_LEVEL_WEB: INFO
LOG_LEVEL_SECURITY: INFO
LOG_LEVEL_JPA: INFO
LOG_LEVEL_APP: INFO

logging:
  file:
    name: /var/log/tennis-web-app/application.log
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# CORS (운영 프론트엔드 도메인)
CORS_ALLOWED_ORIGINS: ${PROD_CORS_ALLOWED_ORIGINS} # 예: "https://www.your-domain.com"

# Frontend URL
FRONTEND_URL: ${PROD_FRONTEND_URL} # 예: "https://www.your-domain.com"

# Cookie (Cross-Origin 설정)
# FE: https://tennis-web-app-fe.pages.dev | BE: http://43.203.7.232:8080
COOKIE_SECURE: ${PROD_COOKIE_SECURE:false} # HTTPS 사용 시 true, HTTP 사용 시 false
COOKIE_SAME_SITE: None # Cross-Origin 쿠키를 위해 None 필요 (Secure=true 필수)
COOKIE_DOMAIN: "" # 다른 도메인이므로 빈 문자열
